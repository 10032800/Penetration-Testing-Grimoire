# Limited Shell Commands and Scripts
Some shell that you may encounter, may be in chrooted environments, docker images, containers, etc and not have the same resources that we are used to using with our own systems. For instance, if we are missing the `cat` command, how would we read files? 
## System Information Gathering
We can try these commands when we are in extremely limimted shells.
### Network Information
To gather system network information withou the common `ifconfig` command, we can use the following commands,
* `cat /proc/net/dev`
* `lspci`
* `netstat -i`
* `ip link show`
* `ip addr show`
## Bash Scripting
These Bash one-liner scripts will help when we encounter extremely limited shells. These work because certain commands are not external compiled programs, but built directly into Bash and many other shells. Some examples are, `while`, `for`, `if`, and other basic logic operators allow us to construct these scripts while in a pinch.
### Cat
We can use the following Bash script to read the contents of a file when we do not have access to the basic `cat` command.
```
user@target-system:$ while read line; do echo $line; done < filename.txt
```
For example, say we do not have acces to `cat`, how would we go about executing the following command listed in the previous section to get the network device info?
```
cat /proc/net/dev
```
We can use Bash redirect and a `while read` loop construct as so,
```
user@target-system:$ while read line; do echo $line; done < /proc/net/dev
```
### Ls
Listing files without access to the `ls` command is easy,
```
user@target-system:$ for file in *; do echo $file; done
```
### Pivoting and NMap
#### Host Discovery
Without the `nmap`, `ettercap` or `netdiscover` programs, how could we determine what hosts we could pivot to if we find multiple interfaces on a compromised machine? Each interface could lead to multiple systems in multiple separate networks- some of which are intended to be internal or private. 

Try my [host-discov.sh](https://github.com/weaknetlabs/Penetration-Testing-Grimoire/blob/master/Tools/host-discov.sh) script. It requires 2 arguments, the first three octets of the network, then the range of the final octets, like so,
```
user@target-system:$ ./host-discov.sh 192.168.1 5-78
```
This will use `ping` to determine if the hosts in the range, `192.168.1.5-78` are alive.
#### Port Scanning
Again, without `nmap` whgat is a good way to port scan a potential internal target from a compromised system? We will use `/dev/tcp` again. Also, I made the applications similar, so taht they take the same exact style of arguments; the target and a range. This time, the range is ports, not the final octet of an IP address.

Try my [portscan.sh](https://github.com/weaknetlabs/Penetration-Testing-Grimoire/blob/master/Tools/portscan.sh) script.
